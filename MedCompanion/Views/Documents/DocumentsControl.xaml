<UserControl x:Class="MedCompanion.Views.Documents.DocumentsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200">

    <Grid Margin="0,10,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="2*" MinHeight="200"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="1.5*" MinHeight="150"/>
        </Grid.RowDefinitions>

        <!-- Bouton pour parcourir et importer des documents -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,0,0,10">
            <Button Content="ðŸ“ Parcourir..."
                   Click="DocBrowseButton_Click"
                   Height="35"
                   Padding="15,0"
                   FontSize="12"
                   Background="#2196F3"
                   Foreground="White"
                   BorderThickness="0"
                   Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1976D2"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
            <TextBlock Text="SÃ©lectionnez des documents Ã  importer (Word, PDF, Images)"
                      FontSize="12"
                      Foreground="#666666"
                      VerticalAlignment="Center"
                      Margin="15,0,0,0"/>
        </StackPanel>

        <!-- Liste des documents -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- CatÃ©gories -->
            <Border Grid.Column="0" Background="White" CornerRadius="8" Padding="10">
                <StackPanel>
                    <TextBlock Text="ðŸ“ CatÃ©gories" FontSize="13" FontWeight="Bold" Margin="0,0,0,8"/>
                    <ListBox x:Name="DocCategoriesListBox" SelectionChanged="DocCategoriesListBox_SelectionChanged">
                        <ListBoxItem Content="ðŸ“„ Tous" Tag="all" IsSelected="True"/>
                        <ListBoxItem Content="ðŸ“‹ Bilans" Tag="bilans"/>
                        <ListBoxItem Content="ðŸ“ Courriers" Tag="courriers"/>
                        <ListBoxItem Content="âš•ï¸ Ordonnances" Tag="ordonnances"/>
                        <ListBoxItem Content="ðŸ“‘ Attestations" Tag="attestations"/>
                        <ListBoxItem Content="ðŸ”¬ Radiologies" Tag="radiologies"/>
                        <ListBoxItem Content="ðŸ§ª Analyses" Tag="analyses"/>
                        <ListBoxItem Content="ðŸ“„ Autres" Tag="autres"/>
                    </ListBox>
                </StackPanel>
            </Border>

            <!-- Documents -->
            <Border Grid.Column="2" Background="White" CornerRadius="8" Padding="15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock x:Name="DocCountLabel"
                              Text="0 documents"
                              FontSize="12"
                              FontWeight="SemiBold"
                              Margin="0,0,0,8"/>

                    <DataGrid x:Name="DocumentsDataGrid"
                             Grid.Row="1"
                             AutoGenerateColumns="False"
                             IsReadOnly="True"
                             SelectionMode="Single"
                             SelectionChanged="DocumentsDataGrid_SelectionChanged"
                             MouseDoubleClick="DocumentsDataGrid_MouseDoubleClick">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Nom" Binding="{Binding FileName}" Width="2*"/>
                            <DataGridTextColumn Header="CatÃ©gorie" Binding="{Binding Category}" Width="*"/>
                            <DataGridTextColumn Header="Date" Binding="{Binding DateAddedDisplay}" Width="1.5*"/>
                            <DataGridTextColumn Header="Taille" Binding="{Binding FileSizeDisplay}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Border>
        </Grid>

        <!-- Boutons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="OpenDropWindowButton"
                   Content="ðŸªŸ FenÃªtre Drag &amp; Drop"
                   Click="OpenDropWindowButton_Click"
                   Height="35"
                   Padding="12,0"
                   Margin="0,0,8,0"
                   FontSize="12"
                   Background="#2196F3"
                   Foreground="White"
                   BorderThickness="0"
                   Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1976D2"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="DeleteDocumentButton"
                   Content="ðŸ—‘ï¸ Supprimer"
                   Click="DeleteDocumentButton_Click"
                   Height="35"
                   Padding="12,0"
                   Margin="0,0,8,0"
                   FontSize="12"
                   Background="#E74C3C"
                   Foreground="White"
                   BorderThickness="0"
                   Cursor="Hand"
                   IsEnabled="False">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#C0392B"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#BDC3C7"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="DocSynthesisButton"
                   Content="ðŸ“„ SynthÃ¨se"
                   Click="DocSynthesisButton_Click"
                   Height="35"
                   Padding="12,0"
                   FontSize="12"
                   Background="#4CAF50"
                   Foreground="White"
                   BorderThickness="0"
                   Cursor="Hand"
                   IsEnabled="False">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#388E3C"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#BDC3C7"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>

        <!-- Zone aperÃ§u synthÃ¨se -->
        <Grid Grid.Row="6">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Margin="0,0,0,8">
                <TextBlock Text="ðŸ“„ AperÃ§u de la synthÃ¨se"
                          FontSize="13"
                          FontWeight="SemiBold"
                          Foreground="#2C3E50"
                          VerticalAlignment="Center"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="DeleteSynthesisBtn"
                            Content="ðŸ—‘ï¸ Supprimer"
                            Height="28"
                            Padding="10,0"
                            FontSize="12"
                            FontWeight="SemiBold"
                            Background="#E74C3C"
                            Foreground="White"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="DeleteSynthesisBtn_Click"
                            ToolTip="Supprimer la synthÃ¨se"
                            Margin="0,0,8,0"
                            Visibility="Collapsed">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#C0392B"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <Button x:Name="SaveSynthesisBtn"
                            Content="ðŸ’¾ Enregistrer"
                            Height="28"
                            Padding="10,0"
                            FontSize="12"
                            FontWeight="SemiBold"
                            Background="#27AE60"
                            Foreground="White"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="SaveSynthesisBtn_Click"
                            ToolTip="Enregistrer la synthÃ¨se"
                            Margin="0,0,8,0"
                            Visibility="Collapsed">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#229954"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <Button x:Name="CloseSynthesisPreviewBtn"
                            Content="âœ•"
                            Width="24"
                            Height="24"
                            FontSize="14"
                            FontWeight="Bold"
                            Background="Transparent"
                            Foreground="#666666"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="CloseSynthesisPreviewBtn_Click"
                            ToolTip="Masquer l'aperÃ§u"
                            Visibility="Collapsed">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Foreground" Value="#E74C3C"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>

            <Border Grid.Row="1"
                    BorderBrush="#BDC3C7"
                    BorderThickness="1"
                    CornerRadius="6"
                    Background="#FAFAFA">
                <RichTextBox x:Name="DocSynthesisPreview"
                             IsReadOnly="True"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Disabled"
                             Background="#FAFAFA"
                             FontSize="13"
                             Padding="12"
                             BorderThickness="0"
                             AcceptsTab="False"/>
            </Border>
        </Grid>
    </Grid>
</UserControl>
