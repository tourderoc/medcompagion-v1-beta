<Window x:Class="MedCompanion.Dialogs.PatientInfoDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Informations Patient" Height="750" Width="650"
        WindowStartupLocation="CenterOwner"
        Background="#F5F5F5">

    <Window.Resources>
        <!-- Style pour les labels -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,10,5"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Style pour les TextBox -->
        <Style x:Key="InputStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="BorderBrush" Value="#CCC"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <!-- Style pour les ComboBox -->
        <Style x:Key="ComboStyle" TargetType="ComboBox">
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>

        <!-- Style pour les DatePicker -->
        <Style x:Key="DatePickerStyle" TargetType="DatePicker">
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>

        <!-- Style pour les GroupBox -->
        <Style x:Key="GroupStyle" TargetType="GroupBox">
            <Setter Property="Margin" Value="0,0,0,15"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="BorderBrush" Value="#3498DB"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <!-- Style pour les boutons -->
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="Margin" Value="5,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinWidth" Value="120"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#3498DB" Padding="20,15">
            <StackPanel>
                <TextBlock x:Name="HeaderText"
                           Text="ðŸ‘¤ Informations Administratives du Patient"
                           Foreground="White"
                           FontSize="18"
                           FontWeight="Bold"/>
                <TextBlock x:Name="PatientNameText"
                           Text=""
                           Foreground="White"
                           FontSize="14"
                           Margin="0,5,0,0"
                           Opacity="0.9"/>
            </StackPanel>
        </Border>

        <!-- Formulaire scrollable -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20">
            <StackPanel>
                <!-- Import Doctolib -->
                <Border Background="#ECF0F1" Padding="15" Margin="0,0,0,20" CornerRadius="4">
                    <StackPanel>
                        <TextBlock Text="ðŸ“¸ Import automatique depuis Doctolib"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,10"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <Button x:Name="ImportDoctolibButton"
                                    Content="ðŸ“ Parcourir fichiers"
                                    Click="ImportDoctolibButton_Click"
                                    Background="#3498DB"
                                    Foreground="White"
                                    Padding="12,8"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Margin="0,0,10,0"/>
                            <Button x:Name="PasteFromClipboardButton"
                                    Content="ðŸ“‹ Coller captures (Ctrl+V)"
                                    Click="PasteFromClipboardButton_Click"
                                    Background="#27AE60"
                                    Foreground="White"
                                    Padding="12,8"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Margin="0,0,10,0"/>
                            <Button x:Name="OpenTessDataFolderButton"
                                    Content="ðŸ“‚ Dossier Tesseract"
                                    Click="OpenTessDataFolderButton_Click"
                                    Background="#95A5A6"
                                    Foreground="White"
                                    Padding="12,8"
                                    BorderThickness="0"
                                    Cursor="Hand"/>
                        </StackPanel>

                        <!-- Zone d'aperÃ§u des images collÃ©es -->
                        <Border x:Name="PreviewBorder"
                                Background="White"
                                BorderBrush="#BDC3C7"
                                BorderThickness="2"
                                CornerRadius="4"
                                Padding="10"
                                Margin="0,10,0,10"
                                Visibility="Collapsed">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Image 1 -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="ðŸ“¸ Capture 1 (partie haute)"
                                               FontWeight="SemiBold"
                                               FontSize="11"
                                               Foreground="#7F8C8D"
                                               Margin="0,0,0,5"
                                               HorizontalAlignment="Center"/>
                                    <Border BorderBrush="#95A5A6" BorderThickness="1" CornerRadius="2">
                                        <Image x:Name="PreviewImage1"
                                               Stretch="Uniform"
                                               MaxHeight="120"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"/>
                                    </Border>
                                </StackPanel>

                                <!-- Image 2 -->
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="ðŸ“¸ Capture 2 (partie basse)"
                                               FontWeight="SemiBold"
                                               FontSize="11"
                                               Foreground="#7F8C8D"
                                               Margin="0,0,0,5"
                                               HorizontalAlignment="Center"/>
                                    <Border BorderBrush="#95A5A6" BorderThickness="1" CornerRadius="2">
                                        <Image x:Name="PreviewImage2"
                                               Stretch="Uniform"
                                               MaxHeight="120"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"/>
                                    </Border>
                                    <Button x:Name="ClearImagesButton"
                                            Content="ðŸ—‘ï¸ Effacer"
                                            Click="ClearImagesButton_Click"
                                            Background="#E74C3C"
                                            Foreground="White"
                                            Padding="8,4"
                                            Margin="0,5,0,0"
                                            BorderThickness="0"
                                            Cursor="Hand"
                                            HorizontalAlignment="Center"
                                            FontSize="10"
                                            Visibility="Collapsed"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <TextBlock Text="ðŸ“ Parcourir : SÃ©lectionnez 1 ou 2 fichiers images â€¢ ðŸ“‹ Coller : Copiez les captures, cliquez 2Ã— pour coller image 1 puis image 2"
                                   FontSize="11"
                                   Foreground="#7F8C8D"
                                   Margin="0,0,0,0"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <!-- IdentitÃ© -->
                <GroupBox Header="ðŸ“‹ IdentitÃ©" Style="{StaticResource GroupStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="Nom *" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="NomTextBox" Style="{StaticResource InputStyle}"/>
                        </StackPanel>

                        <StackPanel Grid.Row="0" Grid.Column="1">
                            <TextBlock Text="PrÃ©nom *" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="PrenomTextBox" Style="{StaticResource InputStyle}"/>
                        </StackPanel>

                        <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="Date de naissance *" Style="{StaticResource LabelStyle}"/>
                            <DatePicker x:Name="DobDatePicker" Style="{StaticResource DatePickerStyle}"/>
                        </StackPanel>

                        <StackPanel Grid.Row="1" Grid.Column="1">
                            <TextBlock Text="Sexe *" Style="{StaticResource LabelStyle}"/>
                            <ComboBox x:Name="SexeComboBox" Style="{StaticResource ComboStyle}">
                                <ComboBoxItem Content="Homme" Tag="H"/>
                                <ComboBoxItem Content="Femme" Tag="F"/>
                                <ComboBoxItem Content="Non-binaire" Tag="NB"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                            <TextBlock Text="Lieu de naissance" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="LieuNaissanceTextBox" Style="{StaticResource InputStyle}"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- Adresse -->
                <GroupBox Header="ðŸ  Adresse" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <TextBlock Text="Rue" Style="{StaticResource LabelStyle}"/>
                        <TextBox x:Name="AdresseRueTextBox" Style="{StaticResource InputStyle}"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="2*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Code postal" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="AdresseCodePostalTextBox" Style="{StaticResource InputStyle}"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Ville" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="AdresseVilleTextBox" Style="{StaticResource InputStyle}"/>
                            </StackPanel>
                        </Grid>

                        <TextBlock Text="Pays" Style="{StaticResource LabelStyle}"/>
                        <TextBox x:Name="AdressePaysTextBox" Text="France" Style="{StaticResource InputStyle}"/>
                    </StackPanel>
                </GroupBox>

                <!-- SÃ©curitÃ© sociale -->
                <GroupBox Header="ðŸ” SÃ©curitÃ© Sociale" Style="{StaticResource GroupStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="NumÃ©ro de sÃ©curitÃ© sociale (NIR)" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="NumeroSecuriteSocialeTextBox"
                                     Style="{StaticResource InputStyle}"
                                     MaxLength="15"
                                     ToolTip="15 chiffres"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="NumÃ©ro INS (si diffÃ©rent)" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="NumeroINSTextBox" Style="{StaticResource InputStyle}"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- Accompagnant -->
                <GroupBox Header="ðŸ‘¥ Accompagnant" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Nom de l'accompagnant" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="AccompagnantNomTextBox" Style="{StaticResource InputStyle}"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="PrÃ©nom de l'accompagnant" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="AccompagnantPrenomTextBox" Style="{StaticResource InputStyle}"/>
                            </StackPanel>
                        </Grid>

                        <TextBlock Text="Lien avec l'enfant" Style="{StaticResource LabelStyle}"/>
                        <ComboBox x:Name="AccompagnantLienComboBox" Style="{StaticResource ComboStyle}">
                            <ComboBoxItem Content="MÃ¨re"/>
                            <ComboBoxItem Content="PÃ¨re"/>
                            <ComboBoxItem Content="Ã‰ducateur"/>
                            <ComboBoxItem Content="Tuteur"/>
                            <ComboBoxItem Content="Famille d'accueil"/>
                            <ComboBoxItem Content="Autre"/>
                        </ComboBox>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="TÃ©lÃ©phone" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="AccompagnantTelephoneTextBox" Style="{StaticResource InputStyle}"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Email" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="AccompagnantEmailTextBox" Style="{StaticResource InputStyle}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </GroupBox>

                <!-- Situation -->
                <GroupBox Header="ðŸ¡ Situation d'Accueil" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <TextBlock Text="Situation d'accueil" Style="{StaticResource LabelStyle}"/>
                        <ComboBox x:Name="SituationAccueilComboBox" Style="{StaticResource ComboStyle}">
                            <ComboBoxItem Content="Domicile"/>
                            <ComboBoxItem Content="Foyer"/>
                            <ComboBoxItem Content="Famille d'accueil"/>
                            <ComboBoxItem Content="Autre"/>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>

                <!-- ScolaritÃ© -->
                <GroupBox Header="ðŸŽ“ ScolaritÃ©" Style="{StaticResource GroupStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="Ã‰cole / Ã‰tablissement" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="EcoleTextBox" Style="{StaticResource InputStyle}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Classe / Niveau" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="ClasseTextBox" Style="{StaticResource InputStyle}"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- Footer avec boutons -->
        <Border Grid.Row="2" Background="White" BorderBrush="#DDD" BorderThickness="0,1,0,0" Padding="20,15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="SaveButton"
                        Content="ðŸ’¾ Sauvegarder"
                        Click="SaveButton_Click"
                        Background="#27AE60"
                        Foreground="White"
                        Style="{StaticResource ButtonStyle}"/>
                <Button x:Name="CancelButton"
                        Content="âœ– Annuler"
                        Click="CancelButton_Click"
                        Background="#95A5A6"
                        Foreground="White"
                        Style="{StaticResource ButtonStyle}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
