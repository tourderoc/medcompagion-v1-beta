<Window x:Class="MedCompanion.Dialogs.AnonymizationPhase3Dialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Anonymisation renforcÃ©e"
        Height="280"
        Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F6FA">

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- En-tÃªte -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="ðŸ”’ Anonymisation renforcÃ©e"
                      FontSize="18"
                      FontWeight="Bold"
                      Foreground="#2C3E50"
                      HorizontalAlignment="Center"
                      Margin="0,0,0,5"/>
            <TextBlock Text="DÃ©tection avancÃ©e avec IA locale (Ollama)"
                      FontSize="12"
                      Foreground="#7F8C8D"
                      HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- Contenu -->
        <Border Grid.Row="2"
                Background="White"
                CornerRadius="8"
                Padding="20"
                BorderBrush="#E8E8E8"
                BorderThickness="1">
            <StackPanel>
                <TextBlock TextWrapping="Wrap"
                          FontSize="13"
                          Foreground="#2C3E50"
                          LineHeight="22">
                    <Run Text="L'anonymisation standard (Phase 1+2) a Ã©tÃ© appliquÃ©e."/><LineBreak/><LineBreak/>
                    <Run Text="Voulez-vous activer la " FontWeight="SemiBold"/>
                    <Run Text="Phase 3" FontWeight="Bold" Foreground="#27AE60"/>
                    <Run Text=" pour dÃ©tecter les entitÃ©s restantes (mÃ©decins, hÃ´pitaux, lieux) avec votre " FontWeight="SemiBold"/>
                    <Run Text="IA locale (Ollama)" FontWeight="Bold" Foreground="#3498DB"/>
                    <Run Text=" ?" FontWeight="SemiBold"/><LineBreak/><LineBreak/>
                    <Run Text="âœ“ Gratuit" Foreground="#27AE60"/><LineBreak/>
                    <Run Text="âœ“ PrivÃ© (100% local)" Foreground="#27AE60"/><LineBreak/>
                    <Run Text="â± +10-20 secondes" Foreground="#95A5A6"/>
                </TextBlock>

                <!-- SÃ©lection du modÃ¨le Ollama -->
                <Border Margin="0,15,0,0"
                        Padding="12"
                        Background="#F0F8FF"
                        CornerRadius="4"
                        BorderBrush="#3498DB"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ¤– ModÃ¨le Ollama pour la dÃ©tection :"
                                  FontSize="12"
                                  FontWeight="SemiBold"
                                  Foreground="#2C3E50"
                                  Margin="0,0,0,8"/>
                        <ComboBox x:Name="ModelComboBox"
                                 FontSize="12"
                                 Padding="8"
                                 BorderBrush="#CCC"
                                 BorderThickness="1">
                            <ComboBoxItem Content="llama3 (par dÃ©faut)" IsSelected="True" Tag="llama3"/>
                            <ComboBoxItem Content="gemma:1b (rapide)" Tag="gemma:1b"/>
                            <ComboBoxItem Content="gemma:4b" Tag="gemma:4b"/>
                            <ComboBoxItem Content="gemma:12b (prÃ©cis)" Tag="gemma:12b"/>
                            <ComboBoxItem Content="mistral" Tag="mistral"/>
                            <ComboBoxItem Content="phi" Tag="phi"/>
                        </ComboBox>
                        <TextBlock Text="ðŸ’¡ Les modÃ¨les plus petits (1b-4b) sont plus rapides mais moins prÃ©cis"
                                  FontSize="10"
                                  Foreground="#7F8C8D"
                                  TextWrapping="Wrap"
                                  Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Boutons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Content="âœ“ Oui, activer Phase 3"
                   Click="YesButton_Click"
                   Height="40"
                   Padding="20,0"
                   FontSize="13"
                   FontWeight="SemiBold"
                   Background="#27AE60"
                   Foreground="White"
                   BorderThickness="0"
                   Cursor="Hand"
                   Margin="0,0,10,0">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                           CornerRadius="6"
                                           Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#229954"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button Content="Non, continuer"
                   Click="NoButton_Click"
                   Height="40"
                   Padding="20,0"
                   FontSize="13"
                   Background="#95A5A6"
                   Foreground="White"
                   BorderThickness="0"
                   Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                           CornerRadius="6"
                                           Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#7F8C8D"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
